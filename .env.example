# ===========================================
# 3CX BackupWiz - Environment Variables
# ===========================================

# ===========================================
# WEB APP (Vercel / Next.js)
# Copy these to your Vercel project settings
# ===========================================

# Supabase (REQUIRED)
# Get these from: Supabase Dashboard > Project Settings > API
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJxxxxxx
SUPABASE_SERVICE_ROLE_KEY=eyJxxxxxx

# Database URL for Drizzle migrations (REQUIRED for db:push)
# Get from: Supabase Dashboard > Settings > Database > Connection string > URI
DATABASE_URL=postgresql://postgres.[project-ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# App URL (REQUIRED)
# Set this to your Vercel deployment URL
NEXT_PUBLIC_APP_URL=https://your-app.vercel.app

# App Name (optional - defaults to "3CX BackupWiz")
# NEXT_PUBLIC_APP_NAME="3CX BackupWiz"

# ===========================================
# SYNC SERVICE (Self-hosted 3CX Server)
# Run this on the same server as 3CX or a server
# with network access to the 3CX database
# ===========================================

# Supabase connection for sync service
# Same as above, but needed in sync service environment
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_SERVICE_ROLE_KEY=eyJxxxxxx

# Multi-tenant mode (REQUIRED for SaaS)
# When true, syncs data for all active tenants from database
# When false, uses environment variables for single 3CX connection
MULTI_TENANT_MODE=true

# ===========================================
# SINGLE-TENANT MODE ONLY
# Only used when MULTI_TENANT_MODE=false
# ===========================================

# 3CX Database Connection
# THREECX_DB_HOST=127.0.0.1
# THREECX_DB_PORT=5432
# THREECX_DB_NAME=database_single
# THREECX_DB_USER=postgres
# THREECX_DB_PASSWORD=xxxxx

# 3CX File Paths
# THREECX_CHAT_FILES_PATH=/var/lib/3cxpbx/Instance1/Data/Http/Files/Chat Files
# THREECX_RECORDINGS_PATH=/var/lib/3cxpbx/Instance1/Data/Recordings
# THREECX_VOICEMAIL_PATH=/var/lib/3cxpbx/Instance1/Data/Voicemail
# THREECX_FAX_PATH=/var/lib/3cxpbx/Instance1/Data/Fax
# THREECX_MEETINGS_PATH=/var/lib/3cxpbx/Instance1/Data/Http/Recordings

# ===========================================
# SYNC SETTINGS
# ===========================================

# Sync interval in seconds (default: 60)
SYNC_INTERVAL_SECONDS=60

# Batch size for syncing messages (default: 100)
SYNC_BATCH_SIZE=100

# Enable/disable specific backup types
# BACKUP_CHATS=true
# BACKUP_CHAT_MEDIA=true
# BACKUP_RECORDINGS=true
# BACKUP_VOICEMAILS=true
# BACKUP_FAXES=true
# BACKUP_CDR=true
# BACKUP_MEETINGS=true

# ===========================================
# LOGGING
# ===========================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# ===========================================
# DEPRECATED - No longer needed with Supabase Storage
# AWS S3 settings below are kept for backwards compatibility
# New installations should use Supabase Storage (default)
# ===========================================

# AWS_ACCESS_KEY_ID=AKIA...
# AWS_SECRET_ACCESS_KEY=xxxxx
# AWS_REGION=us-east-1
# S3_BUCKET_NAME=your-3cx-bucket
# S3_ENDPOINT=  # For non-AWS S3 compatible storage
